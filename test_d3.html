<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <link rel="stylesheet" href="test_d3.css">
</head>

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v6.js"></script>

<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div>

<body>
  <main>
    <div id="paper-container">
      <h1>
        Paper Title
      </h1>
      <section id="abstract">
        <h2>Abstract</h2>
        <p id="abstract0">
          In India, women represent 45% of total computer science enrollment in universities, almost three times the rate in the United States, where it is 18%. At the same time, women make up an estimated 25-30% of the HCI community in India, half the rate in the U.S. We investigate the complexities of these surprising phenomena through qualitative research of Indian computer science and human-computer interaction researchers and professionals at various life stages. We find among other things that Indian familial norms play a significant role in pressuring young women into computing as a field; that familial pressures and workplace discrimination then cause a precipitous exit of women from computing at the onset of marriage; and that HCI occupies an interstitial space between art and technology that affects women’s careers. Our findings underscore the societal influence on women’s representation in the tech sector and invite further participation by the HCI community in related questions.
        </p>
      </section>
      <section id="introduction">
        <h2>Introduction</h2>
        <p id="introduction0">
          For about a decade now, there has been public scrutiny of gender inequality in the technology industry, and for valid reasons. Some milestones in this conversation include a 2007 UC Davis report noting that only 7.3% of Silicon Valley boards members were women [36]; Facebook COO Sheryl Sandberg’s bright spotlight on tech-and-gender issues through public talks and a best-selling book in 2010 [56]; and Google’s 2014 disclosure of the demographic make-up of its employees [6].
        </p>

        <p id="introduction1">
          The aspiration is for proportional representation, but ground reality has yet to catch up. As even critics of Silicon Valley’s gender inequality acknowledge, much of the gender parity challenge lies with the so-called “pipeline” that feeds into employment [26]. Women make up only 18% of computer science (CS) majors at U.S. universities, and frustratingly, this is down from a peak of about 37% in 1984 [31]. The situation is similar in other countries that are above the global average of Global Gender Gap index (referred to as genderequal countries henceforth, though inequalities persist; we mean this only relative to highly gender-unequal nations)1— e.g., UK at 18% and Sweden at 22% of workforce [17]. 
        </p>

        <p id="introduction2">
          In contrast, human-computer interaction (HCI) is one of the few computing fields to have achieved gender parity in genderequal countries [19]. A number of factors lead to the higher representation of women in HCI, including linking work to societal impact, creativity, and inter disciplinarity [43, 42].
        </p>

        <p id="introduction3">
          In this paper, we report from qualitative research of Indian women scientists and practitioners in CS and HCI at various stages in their careers. How is it that in a larger social context of gender inequality, India manages to outperform more gender-equal countries with respect to computing enrollment? How long does the strong pipeline continue? And, why is the female representation poorer in HCI, when the numbers are higher in CS? Through our research, we find that socio-cultural pressures encourage, even coerce, women into entry-level programs in computing due to the lucrative and stable prospects of the IT sector. However, a drastic shift accompanies marriage and childcare expectations, with careers brought to a halt for many Indian women. In contrast to CS, HCI is viewed as an arts field, hence considered less desirable, and compounded by discrimination issues in fieldwork and practice.
        </p>

        <p id="introduction4">
          The novel contributions in this paper are as follows: First, we explore how women in the Indian computing sector experience gender-related issues across their lifetime, from undergraduates to researchers, and identify how gender discrimination and representation evolve through life stages. Against a backdrop of significant literature in gender-equal contexts, we highlight a range of culture-dependent differences. Second, we find a number of substantial differences in perceptions—by women and by Indian society as a whole—of HCI compared with computer science. To our knowledge, these have never been investigated formally anywhere in the world. Finally, we argue that it is imperative that HCI researchers participate more vigorously in understanding the human-system interface that excludes so many women. To this end, we provide some suggestions for the design, policy, and education around women’s participation in computing and HCI.
        </p>
      </section>
    </div>
  </main>
</body>

<script>

// set the dimensions and margins of the graph
const margin = {top: 10, right: 20, bottom: 30, left: 150},
    width = 800 - margin.left - margin.right,
    height = 420 - margin.top - margin.bottom,
    inner_width = width - margin.left - margin.right,
    inner_height = height - margin.top - margin.bottom;

// append the svg object to the body of the page
const svg = d3.select("#my_dataviz")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", `translate(${margin.left},${margin.top})`);

//Read the data
d3.csv("https://raw.githubusercontent.com/Murtz5253/beadplots/main/output/women_computing_india-marriage-matrimony-married_couple-marriage_ceremony-wedlock-wedding-man_and_wife-spousal_relationship-marriage-union.csv").then( function(data) {

  // List of groups (here I have one group per column)
  var allGroup = ['abstract', 'introduction', 'related work', 'background',
          'method', 'findings', 'discussion', 'conclusion']

  // ['abstract', 'introduction', 'related work', 'background',
  //        'method', 'findings', 'discussion', 'conclusion']

  // Reformat the data: we need an array of arrays of {x, y} tuples
  var dataReady = allGroup.map( function(grpName) { // .map allows to do something for each element of the list
    return {
      name: grpName,
      // Because of the way data is formatted, need to filter on
      // the section column first, otherwise D3 will try to connect
      // lines across rows.
      values: data.filter(function(d)
          {return d.Section==grpName} 
        ).map(function(d) {
          return {paragraph: d.Paragraph, section: d.Section, algo_score_raw: d.algo_score_raw};
        })
    };
  });

  console.log(dataReady)

  var uniqueArray = dataReady.filter(function(elem, pos) {
    return dataReady.indexOf(elem) == pos;
  });
  console.log(uniqueArray)


  // Add X axis
  const x = d3.scaleLinear()
    .domain([0, 57])
    .range([20, width ]);
  svg.append("g")
    .attr("transform", `translate(0, ${height})`)
    .call(d3.axisBottom(x).ticks(30));

  // Add Y axis
  const y = d3.scalePoint()
    .domain(['abstract', 'introduction', 'related work', 'background',
             'method', 'findings', 'discussion', 'conclusion'])
    .range([0, height]);

  y.padding(.75);

  // Add a scale for bubble size
  const z = d3.scaleLinear()
    .domain([0, 12])
    .range([0, 15]);

  svg.append("g")
    .call(d3.axisLeft(y));

  // A color scale: one color for each group
  var myColor = d3.scaleOrdinal()
    .domain(allGroup)
    .range(d3.schemeSet2);

  // Add the lines
    var line = d3.line()
      // d.paragraph and d.section are lowercase because they need to match the new  reformatted dataReady key names
      .x(function(d) { return x(+d.paragraph) })
      .y(function(d) { return y(d.section) })
    svg.selectAll("myLines")
      .data(dataReady)
      .enter()
      .append("path")
        .attr("d", function(d){ return line(d.values) } )
        .attr("stroke", function(d){ return '#4c78a8' })
        .style("stroke-width", 2)
        .style("fill", "none")

    // Add the points
    var myDots = svg
      // First we need to enter in a group
      .selectAll("myDots")
      .data(dataReady)
      .enter()
        .append('g')
      // Second we need to enter in the 'values' part of this group
      .selectAll("p")
      .data(function(d){ return d.values })
      .enter()
      .append("circle")
      // d.paragraph and d.section are lowercase because they need to match the new  reformatted dataReady key names
        .attr("cx", function(d) { return x(d.paragraph) } )
        .attr("cy", function(d) { return y(d.section) } )
        .attr("r", d => z(d.algo_score_raw))
        .attr("fill", "#4c78a8")
        .on("mouseover", hovered)
        .on("click", clicked)
        .on("mouseout", unhovered)

      function hovered(event, d) {

        d3.select(this).transition()
            .attr("r", d => z(d.algo_score_raw) * 2); // double the size of the point

        console.log(d3.select(this).data())
      }

      function unhovered(event, d) {

        d3.select(this).transition()
            .attr("r", d => z(d.algo_score_raw)) // back to original size
            .attr("fill", "#4c78a8"); // back to original color in case it had been clicked
      }

      function clicked(event, d) {

        d3.select(this).transition()
            .attr("fill", "black")
            .attr("r", radius * 2)
          .transition()
            .attr("r", radius)
            .attr("fill", d3.schemeCategory10[d.index % 10]);
      }


})

</script>